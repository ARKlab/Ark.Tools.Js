"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var R = _interopRequireWildcard(require("ramda"));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

var keyType = function keyType(_ref) {
  var key = _ref.key,
      data = _ref.data;
  return R.pipe(R.prop(key), R.type)(data);
};

var columnFilterDataBuilder = function columnFilterDataBuilder(_ref2) {
  var data = _ref2.data,
      _ref2$columnFilterNam = _ref2.columnFilterName,
      columnFilterName = _ref2$columnFilterNam === void 0 ? "ColumnFilter_" : _ref2$columnFilterNam;
  return R.pipe(R.head, R.keys, R.map(function (key) {
    return "".concat(columnFilterName).concat(key, "=").concat(R.path([key, "value"], data[0]));
  }), R.join("&"))(data);
};

var objDataBuilder = function objDataBuilder(_ref3) {
  var data = _ref3.data;
  return R.pipe(R.keys, R.map(function (key) {
    return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));
  }), R.join("&"))(data);
};

var simpleDataBuilder = function simpleDataBuilder(_ref4) {
  var key = _ref4.key,
      data = _ref4.data;

  switch (R.type(data[0])) {
    case "Object":
      return R.pipe(R.map(function (_ref5) {
        var value = _ref5.value;
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.values, R.join("&"))(data);

    case "Number":
    case "String":
      return R.pipe(R.map(function (value) {
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.join("&"))(data);

    default:
      return "";
  }

  return R.pipe(R.map(function (_ref6) {
    var value = _ref6.value;
    return "".concat(key, "=").concat(encodeURIComponent(value));
  }), R.values, R.join("&"))(data);
};

var arrDataBuilder = function arrDataBuilder(_ref7) {
  var key = _ref7.key,
      data = _ref7.data,
      columnFilterName = _ref7.columnFilterName;
  return R.equals(key, "columnFilters") ? columnFilterDataBuilder({
    columnFilterName: columnFilterName,
    data: data
  }) : simpleDataBuilder({
    key: key,
    data: data
  });
};

var builder = function builder(_ref8) {
  var key = _ref8.key,
      data = _ref8.data,
      columnFilterName = _ref8.columnFilterName;

  switch (keyType({
    key: key,
    data: data
  })) {
    case "Array":
      return arrDataBuilder({
        key: key,
        columnFilterName: columnFilterName,
        data: R.prop(key, data)
      });

    case "Object":
      return objDataBuilder({
        data: R.prop(key, data)
      });

    case "Number":
    case "String":
      return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));

    default:
      return "";
  }
};

var queryStringBuilder = function queryStringBuilder(_ref9) {
  var filters = _ref9.filters,
      columnFilterName = _ref9.columnFilterName;
  return R.pipe(R.filter(function (x) {
    return x;
  }), R.keys, R.map(function (key) {
    return builder({
      key: key,
      data: filters,
      columnFilterName: columnFilterName
    });
  }), R.join("&") // R.trim
  )(filters);
};

var _default = queryStringBuilder;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy9yZXF1ZXN0L3F1ZXJ5QnVpbGRlci50cyJdLCJuYW1lcyI6WyJrZXlUeXBlIiwia2V5IiwiZGF0YSIsIlIiLCJwaXBlIiwicHJvcCIsInR5cGUiLCJjb2x1bW5GaWx0ZXJEYXRhQnVpbGRlciIsImNvbHVtbkZpbHRlck5hbWUiLCJoZWFkIiwia2V5cyIsIm1hcCIsInBhdGgiLCJqb2luIiwib2JqRGF0YUJ1aWxkZXIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzaW1wbGVEYXRhQnVpbGRlciIsInZhbHVlIiwidmFsdWVzIiwiYXJyRGF0YUJ1aWxkZXIiLCJlcXVhbHMiLCJidWlsZGVyIiwicXVlcnlTdHJpbmdCdWlsZGVyIiwiZmlsdGVycyIsImZpbHRlciIsIngiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFVO0FBQUEsTUFBR0MsR0FBSCxRQUFHQSxHQUFIO0FBQUEsTUFBUUMsSUFBUixRQUFRQSxJQUFSO0FBQUEsU0FDZEMsQ0FBQyxDQUFDQyxJQUFGLENBQ0VELENBQUMsQ0FBQ0UsSUFBRixDQUFpQkosR0FBakIsQ0FERixFQUVFRSxDQUFDLENBQUNHLElBRkosRUFHRUosSUFIRixDQURjO0FBQUEsQ0FBaEI7O0FBTUEsSUFBTUssdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQjtBQUFBLE1BQzlCTCxJQUQ4QixTQUM5QkEsSUFEOEI7QUFBQSxvQ0FFOUJNLGdCQUY4QjtBQUFBLE1BRTlCQSxnQkFGOEIsc0NBRVgsZUFGVztBQUFBLFNBTzlCTCxDQUFDLENBQUNDLElBQUYsQ0FDRUQsQ0FBQyxDQUFDTSxJQURKLEVBRUVOLENBQUMsQ0FBQ08sSUFGSixFQUdFUCxDQUFDLENBQUNRLEdBQUYsQ0FDRSxVQUFBVixHQUFHO0FBQUEscUJBQ0VPLGdCQURGLFNBQ3FCUCxHQURyQixjQUVDRSxDQUFDLENBQUNTLElBQUYsQ0FBTyxDQUFDWCxHQUFELEVBQU0sT0FBTixD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QixFQUFoQkE7QUFBdEIsS0FBRCxDQUFyQjtBQUFBLEdBQU4sQ0FIRixFQUlFTCxDQUFDLENBQUNVLElBQUYsQ0FBTyxHQUFQLENBSkYsQ0FLRTtBQUxGLElBTUVVLE9BTkYsQ0FQeUI7QUFBQSxDQUEzQjs7ZUFlZUQsa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xyXG5cclxuY29uc3Qga2V5VHlwZSA9ICh7IGtleSwgZGF0YSB9OiB7IGtleTogc3RyaW5nOyBkYXRhOiBhbnkgfSkgPT5cclxuICBSLnBpcGUoXHJcbiAgICBSLnByb3A8YW55LCBhbnk+KGtleSksXHJcbiAgICBSLnR5cGVcclxuICApKGRhdGEpO1xyXG5cclxuY29uc3QgY29sdW1uRmlsdGVyRGF0YUJ1aWxkZXIgPSAoe1xyXG4gIGRhdGEsXHJcbiAgY29sdW1uRmlsdGVyTmFtZSA9IFwiQ29sdW1uRmlsdGVyX1wiXHJcbn06IHtcclxuICBkYXRhOiBhbnk7XHJcbiAgY29sdW1uRmlsdGVyTmFtZT86IHN0cmluZztcclxufSkgPT5cclxuICBSLnBpcGUoXHJcbiAgICBSLmhlYWQsXHJcbiAgICBSLmtleXMsXHJcbiAgICBSLm1hcChcclxuICAgICAga2V5ID0+XHJcbiAgICAgICAgYCR7Y29sdW1uRmlsdGVyTmFtZX0ke2tleX09JHsoXHJcbiAgICAgICAgICBSLnBhdGgoW2tleSwgXCJ2YWx1ZVwiXSwgZGF0YVswXSlcclxuICAgICAgICApfWBcclxuICAgICksXHJcbiAgICBSLmpvaW4oXCImXCIpXHJcbiAgKShkYXRhKTtcclxuXHJcbmNvbnN0IG9iakRhdGFCdWlsZGVyID0gKHsgZGF0YSB9OiB7IGRhdGE6IGFueSB9KSA9PlxyXG4gIFIucGlwZShcclxuICAgIFIua2V5cyxcclxuICAgIFIubWFwKChrZXk6IGFueSkgPT4gYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudChSLnByb3Aoa2V5LCBkYXRhKSl9YCksXHJcbiAgICBSLmpvaW4oXCImXCIpXHJcbiAgKShkYXRhKTtcclxuXHJcbmNvbnN0IHNpbXBsZURhdGFCdWlsZGVyID0gKHsga2V5LCBkYXRhIH06IHsga2V5OiBzdHJpbmc7IGRhdGE6IGFueSB9KSA9PiB7XHJcbiAgc3dpdGNoIChSLnR5cGUoZGF0YVswXSkpIHtcclxuICAgIGNhc2UgXCJPYmplY3RcIjpcclxuICAgICAgcmV0dXJuIFIucGlwZShcclxuICAgICAgICBSLm1hcChcclxuICAgICAgICAgICh7IHZhbHVlIH06IHsgdmFsdWU6IHN0cmluZyB9KSA9PlxyXG4gICAgICAgICAgICBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gXHJcbiAgICAgICAgKSxcclxuICAgICAgICBSLnZhbHVlcyxcclxuICAgICAgICBSLmpvaW4oXCImXCIpXHJcbiAgICAgICkoZGF0YSk7XHJcbiAgICBjYXNlIFwiTnVtYmVyXCI6XHJcbiAgICBjYXNlIFwiU3RyaW5nXCI6XHJcbiAgICAgIHJldHVybiBSLnBpcGUoXHJcbiAgICAgICAgUi5tYXAoKHZhbHVlOiBhbnkpID0+IGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWApLFxyXG4gICAgICAgIFIuam9pbihcIiZcIilcclxuICAgICAgKShkYXRhKTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxuICByZXR1cm4gUi5waXBlKFxyXG4gICAgUi5tYXAoXHJcbiAgICAgICh7IHZhbHVlIH06IHsgdmFsdWU6IHN0cmluZyB9KSA9PiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gXHJcbiAgICApLFxyXG4gICAgUi52YWx1ZXMsXHJcbiAgICBSLmpvaW4oXCImXCIpXHJcbiAgKShkYXRhKTtcclxufTtcclxuY29uc3QgYXJyRGF0YUJ1aWxkZXIgPSAoe1xyXG4gIGtleSxcclxuICBkYXRhLFxyXG4gIGNvbHVtbkZpbHRlck5hbWVcclxufToge1xyXG4gIGtleTogc3RyaW5nO1xyXG4gIGRhdGE6IGFueTtcclxuICBjb2x1bW5GaWx0ZXJOYW1lPzogc3RyaW5nO1xyXG59KSA9PlxyXG4gIFIuZXF1YWxzKGtleSwgXCJjb2x1bW5GaWx0ZXJzXCIpXHJcbiAgICA/IGNvbHVtbkZpbHRlckRhdGFCdWlsZGVyKHsgY29sdW1uRmlsdGVyTmFtZSwgZGF0YSB9KVxyXG4gICAgOiBzaW1wbGVEYXRhQnVpbGRlcih7IGtleSwgZGF0YSB9KTtcclxuXHJcbmNvbnN0IGJ1aWxkZXIgPSAoe1xyXG4gIGtleSxcclxuICBkYXRhLFxyXG4gIGNvbHVtbkZpbHRlck5hbWVcclxufToge1xyXG4gIGtleTogc3RyaW5nO1xyXG4gIGRhdGE6IGFueTtcclxuICBjb2x1bW5GaWx0ZXJOYW1lPzogc3RyaW5nO1xyXG59KSA9PiB7XHJcbiAgc3dpdGNoIChrZXlUeXBlKHsga2V5LCBkYXRhIH0pKSB7XHJcbiAgICBjYXNlIFwiQXJyYXlcIjpcclxuICAgICAgcmV0dXJuIGFyckRhdGFCdWlsZGVyKHsga2V5LCBjb2x1bW5GaWx0ZXJOYW1lLCBkYXRhOiBSLnByb3Aoa2V5LCBkYXRhKSB9KTtcclxuICAgIGNhc2UgXCJPYmplY3RcIjpcclxuICAgICAgcmV0dXJuIG9iakRhdGFCdWlsZGVyKHsgZGF0YTogUi5wcm9wKGtleSwgZGF0YSkgfSk7XHJcbiAgICBjYXNlIFwiTnVtYmVyXCI6XHJcbiAgICBjYXNlIFwiU3RyaW5nXCI6XHJcbiAgICAgIHJldHVybiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFIucHJvcChrZXksIGRhdGEpKX1gO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcXVlcnlTdHJpbmdCdWlsZGVyID0gKHtcclxuICBmaWx0ZXJzLFxyXG4gIGNvbHVtbkZpbHRlck5hbWVcclxufToge1xyXG4gIGZpbHRlcnM6IGFueTtcclxuICBjb2x1bW5GaWx0ZXJOYW1lPzogc3RyaW5nO1xyXG59KSA9PlxyXG4gIFIucGlwZShcclxuICAgIFIuZmlsdGVyKCh4OiBhbnkpID0+IHgpLFxyXG4gICAgUi5rZXlzLFxyXG4gICAgUi5tYXAoKGtleTogYW55KSA9PiBidWlsZGVyKHsga2V5LCBkYXRhOiBmaWx0ZXJzLCBjb2x1bW5GaWx0ZXJOYW1lIH0pKSxcclxuICAgIFIuam9pbihcIiZcIilcclxuICAgIC8vIFIudHJpbVxyXG4gICkoZmlsdGVycyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBxdWVyeVN0cmluZ0J1aWxkZXI7XHJcbiJdfQ==