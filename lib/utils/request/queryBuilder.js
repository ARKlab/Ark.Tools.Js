"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var R = _interopRequireWildcard(require("ramda"));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }

var keyType = function keyType(_ref) {
  var key = _ref.key,
      data = _ref.data;
  return R.pipe(R.prop(key), R.type)(data);
};

var columnFilterDataBuilder = function columnFilterDataBuilder(_ref2) {
  var data = _ref2.data,
      _ref2$columnFilterNam = _ref2.columnFilterName,
      columnFilterName = _ref2$columnFilterNam === void 0 ? "ColumnFilter_" : _ref2$columnFilterNam;
  return R.pipe(R.head, R.keys, R.map(function (key) {
    return "".concat(columnFilterName).concat(key, "=").concat(R.path([key, "value"], data[0]));
  }), R.join("&"))(data);
};

var objDataBuilder = function objDataBuilder(_ref3) {
  var data = _ref3.data;
  return R.pipe(R.keys, R.map(function (key) {
    return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));
  }), R.join("&"))(data);
};

var simpleDataBuilder = function simpleDataBuilder(_ref4) {
  var key = _ref4.key,
      data = _ref4.data;

  switch (R.type(data[0])) {
    case "Object":
      return R.pipe(R.map(function (_ref5) {
        var value = _ref5.value;
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.values, R.join("&"))(data);

    case "Number":
    case "String":
      return R.pipe(R.map(function (value) {
        return "".concat(key, "=").concat(encodeURIComponent(value));
      }), R.join("&"))(data);

    default:
      return "";
  }

  return R.pipe(R.map(function (_ref6) {
    var value = _ref6.value;
    return "".concat(key, "=").concat(encodeURIComponent(value));
  }), R.values, R.join("&"))(data);
};

var arrDataBuilder = function arrDataBuilder(_ref7) {
  var key = _ref7.key,
      data = _ref7.data,
      columnFilterName = _ref7.columnFilterName;
  return R.equals(key, "columnFilters") ? columnFilterDataBuilder({
    columnFilterName: columnFilterName,
    data: data
  }) : simpleDataBuilder({
    key: key,
    data: data
  });
};

var builder = function builder(_ref8) {
  var key = _ref8.key,
      data = _ref8.data,
      columnFilterName = _ref8.columnFilterName;

  switch (keyType({
    key: key,
    data: data
  })) {
    case "Array":
      return arrDataBuilder({
        key: key,
        columnFilterName: columnFilterName,
        data: R.prop(key, data)
      });

    case "Object":
      return objDataBuilder({
        data: R.prop(key, data)
      });

    case "Number":
    case "String":
      return "".concat(key, "=").concat(encodeURIComponent(R.prop(key, data)));

    default:
      return "";
  }
};

var queryStringBuilder = function queryStringBuilder(_ref9) {
  var filters = _ref9.filters,
      columnFilterName = _ref9.columnFilterName;
  return R.pipe(R.filter(function (x) {
    return x;
  }), R.keys, R.map(function (key) {
    return builder({
      key: key,
      data: filters,
      columnFilterName: columnFilterName
    });
  }), R.join("&"))(filters);
};

var _default = queryStringBuilder;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy9yZXF1ZXN0L3F1ZXJ5QnVpbGRlci50cyJdLCJuYW1lcyI6WyJrZXlUeXBlIiwia2V5IiwiZGF0YSIsIlIiLCJwaXBlIiwicHJvcCIsInR5cGUiLCJjb2x1bW5GaWx0ZXJEYXRhQnVpbGRlciIsImNvbHVtbkZpbHRlck5hbWUiLCJoZWFkIiwia2V5cyIsIm1hcCIsInBhdGgiLCJqb2luIiwib2JqRGF0YUJ1aWxkZXIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzaW1wbGVEYXRhQnVpbGRlciIsInZhbHVlIiwidmFsdWVzIiwiYXJyRGF0YUJ1aWxkZXIiLCJlcXVhbHMiLCJidWlsZGVyIiwicXVlcnlTdHJpbmdCdWlsZGVyIiwiZmlsdGVycyIsImZpbHRlciIsIngiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFVO0FBQUEsTUFBR0MsR0FBSCxRQUFHQSxHQUFIO0FBQUEsTUFBUUMsSUFBUixRQUFRQSxJQUFSO0FBQUEsU0FDZEMsQ0FBQyxDQUFDQyxJQUFGLENBQ0VELENBQUMsQ0FBQ0UsSUFBRixDQUFpQkosR0FBakIsQ0FERixFQUVFRSxDQUFDLENBQUNHLElBRkosRUFHRUosSUFIRixDQURjO0FBQUEsQ0FBaEI7O0FBTUEsSUFBTUssdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQjtBQUFBLE1BQzlCTCxJQUQ4QixTQUM5QkEsSUFEOEI7QUFBQSxvQ0FFOUJNLGdCQUY4QjtBQUFBLE1BRTlCQSxnQkFGOEIsc0NBRVgsZUFGVztBQUFBLFNBTzlCTCxDQUFDLENBQUNDLElBQUYsQ0FDRUQsQ0FBQyxDQUFDTSxJQURKLEVBRUVOLENBQUMsQ0FBQ08sSUFGSixFQUdFUCxDQUFDLENBQUNRLEdBQUYsQ0FDRSxVQUFBVixHQUFHO0FBQUEscUJBQU9PLGdCQUFQLFNBQTBCUCxHQUExQixjQUFpQ0UsQ0FBQyxDQUFDUyxJQUFGLENBQU8sQ0FBQ1gsR0FBRCxFQUFNLE9BQU4s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QWdCLEVBQWhCQTtBQUF0QixLQUFELENBQXJCO0FBQUEsR0FBTixDQUhGLEVBSUVMLENBQUMsQ0FBQ1UsSUFBRixDQUFPLEdBQVAsQ0FKRixFQUtFVSxPQUxGLENBUHlCO0FBQUEsQ0FBM0I7O2VBY2VELGtCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcclxuXHJcbmNvbnN0IGtleVR5cGUgPSAoeyBrZXksIGRhdGEgfTogeyBrZXk6IHN0cmluZzsgZGF0YTogYW55IH0pID0+XHJcbiAgUi5waXBlKFxyXG4gICAgUi5wcm9wPGFueSwgYW55PihrZXkpLFxyXG4gICAgUi50eXBlXHJcbiAgKShkYXRhKTtcclxuXHJcbmNvbnN0IGNvbHVtbkZpbHRlckRhdGFCdWlsZGVyID0gKHtcclxuICBkYXRhLFxyXG4gIGNvbHVtbkZpbHRlck5hbWUgPSBcIkNvbHVtbkZpbHRlcl9cIlxyXG59OiB7XHJcbiAgZGF0YTogYW55O1xyXG4gIGNvbHVtbkZpbHRlck5hbWU/OiBzdHJpbmc7XHJcbn0pID0+XHJcbiAgUi5waXBlKFxyXG4gICAgUi5oZWFkLFxyXG4gICAgUi5rZXlzLFxyXG4gICAgUi5tYXAoXHJcbiAgICAgIGtleSA9PiBgJHtjb2x1bW5GaWx0ZXJOYW1lfSR7a2V5fT0ke1IucGF0aChba2V5LCBcInZhbHVlXCJdLCBkYXRhWzBdKX1gXHJcbiAgICApLFxyXG4gICAgUi5qb2luKFwiJlwiKVxyXG4gICkoZGF0YSk7XHJcblxyXG5jb25zdCBvYmpEYXRhQnVpbGRlciA9ICh7IGRhdGEgfTogeyBkYXRhOiBhbnkgfSkgPT5cclxuICBSLnBpcGUoXHJcbiAgICBSLmtleXMsXHJcbiAgICBSLm1hcCgoa2V5OiBhbnkpID0+IGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQoUi5wcm9wKGtleSwgZGF0YSkpfWApLFxyXG4gICAgUi5qb2luKFwiJlwiKVxyXG4gICkoZGF0YSk7XHJcblxyXG5jb25zdCBzaW1wbGVEYXRhQnVpbGRlciA9ICh7IGtleSwgZGF0YSB9OiB7IGtleTogc3RyaW5nOyBkYXRhOiBhbnkgfSkgPT4ge1xyXG4gIHN3aXRjaCAoUi50eXBlKGRhdGFbMF0pKSB7XHJcbiAgICBjYXNlIFwiT2JqZWN0XCI6XHJcbiAgICAgIHJldHVybiBSLnBpcGUoXHJcbiAgICAgICAgUi5tYXAoXHJcbiAgICAgICAgICAoeyB2YWx1ZSB9OiB7IHZhbHVlOiBzdHJpbmcgfSkgPT5cclxuICAgICAgICAgICAgYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YFxyXG4gICAgICAgICksXHJcbiAgICAgICAgUi52YWx1ZXMsXHJcbiAgICAgICAgUi5qb2luKFwiJlwiKVxyXG4gICAgICApKGRhdGEpO1xyXG4gICAgY2FzZSBcIk51bWJlclwiOlxyXG4gICAgY2FzZSBcIlN0cmluZ1wiOlxyXG4gICAgICByZXR1cm4gUi5waXBlKFxyXG4gICAgICAgIFIubWFwKCh2YWx1ZTogYW55KSA9PiBgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gKSxcclxuICAgICAgICBSLmpvaW4oXCImXCIpXHJcbiAgICAgICkoZGF0YSk7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcbiAgcmV0dXJuIFIucGlwZShcclxuICAgIFIubWFwKFxyXG4gICAgICAoeyB2YWx1ZSB9OiB7IHZhbHVlOiBzdHJpbmcgfSkgPT4gYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YFxyXG4gICAgKSxcclxuICAgIFIudmFsdWVzLFxyXG4gICAgUi5qb2luKFwiJlwiKVxyXG4gICkoZGF0YSk7XHJcbn07XHJcbmNvbnN0IGFyckRhdGFCdWlsZGVyID0gKHtcclxuICBrZXksXHJcbiAgZGF0YSxcclxuICBjb2x1bW5GaWx0ZXJOYW1lXHJcbn06IHtcclxuICBrZXk6IHN0cmluZztcclxuICBkYXRhOiBhbnk7XHJcbiAgY29sdW1uRmlsdGVyTmFtZT86IHN0cmluZztcclxufSkgPT5cclxuICBSLmVxdWFscyhrZXksIFwiY29sdW1uRmlsdGVyc1wiKVxyXG4gICAgPyBjb2x1bW5GaWx0ZXJEYXRhQnVpbGRlcih7IGNvbHVtbkZpbHRlck5hbWUsIGRhdGEgfSlcclxuICAgIDogc2ltcGxlRGF0YUJ1aWxkZXIoeyBrZXksIGRhdGEgfSk7XHJcblxyXG5jb25zdCBidWlsZGVyID0gKHtcclxuICBrZXksXHJcbiAgZGF0YSxcclxuICBjb2x1bW5GaWx0ZXJOYW1lXHJcbn06IHtcclxuICBrZXk6IHN0cmluZztcclxuICBkYXRhOiBhbnk7XHJcbiAgY29sdW1uRmlsdGVyTmFtZT86IHN0cmluZztcclxufSkgPT4ge1xyXG4gIHN3aXRjaCAoa2V5VHlwZSh7IGtleSwgZGF0YSB9KSkge1xyXG4gICAgY2FzZSBcIkFycmF5XCI6XHJcbiAgICAgIHJldHVybiBhcnJEYXRhQnVpbGRlcih7IGtleSwgY29sdW1uRmlsdGVyTmFtZSwgZGF0YTogUi5wcm9wKGtleSwgZGF0YSkgfSk7XHJcbiAgICBjYXNlIFwiT2JqZWN0XCI6XHJcbiAgICAgIHJldHVybiBvYmpEYXRhQnVpbGRlcih7IGRhdGE6IFIucHJvcChrZXksIGRhdGEpIH0pO1xyXG4gICAgY2FzZSBcIk51bWJlclwiOlxyXG4gICAgY2FzZSBcIlN0cmluZ1wiOlxyXG4gICAgICByZXR1cm4gYCR7a2V5fT0ke2VuY29kZVVSSUNvbXBvbmVudChSLnByb3Aoa2V5LCBkYXRhKSl9YDtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHF1ZXJ5U3RyaW5nQnVpbGRlciA9ICh7XHJcbiAgZmlsdGVycyxcclxuICBjb2x1bW5GaWx0ZXJOYW1lXHJcbn06IHtcclxuICBmaWx0ZXJzOiBhbnk7XHJcbiAgY29sdW1uRmlsdGVyTmFtZT86IHN0cmluZztcclxufSkgPT5cclxuICBSLnBpcGUoXHJcbiAgICBSLmZpbHRlcigoeDogYW55KSA9PiB4KSxcclxuICAgIFIua2V5cyxcclxuICAgIFIubWFwKChrZXk6IGFueSkgPT4gYnVpbGRlcih7IGtleSwgZGF0YTogZmlsdGVycywgY29sdW1uRmlsdGVyTmFtZSB9KSksXHJcbiAgICBSLmpvaW4oXCImXCIpXHJcbiAgKShmaWx0ZXJzKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHF1ZXJ5U3RyaW5nQnVpbGRlcjtcclxuIl19